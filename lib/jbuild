(jbuild_version 1)

; Copy autogenerated files
(rule (copy ../spec/amqp_spec.ml amqp_spec.ml))
(rule (copy ../spec/amqp_constants.ml amqp_constants.ml))

(library
 ((name amqp_thread_async)
  (public_name amqp-client.async.driver)
  (modules (Amqp_thread_async))
  (synopsis "async driver")
  (libraries (async))
  (optional)
 )
)

(library
 ((name        amqp_client.async)
  (public_name amqp-client.async)
  (synopsis "async version")
  (modules (:standard \ (Amqp_thread_lwt Amqp_thread_async)))
  (libraries (ocplib-endian amqp_thread_async))
  (wrapped false)
  (flags (-open Amqp_thread_async))
  (optional)
 )
)
